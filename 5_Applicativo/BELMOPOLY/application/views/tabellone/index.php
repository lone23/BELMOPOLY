<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="<?php echo URL ?>application/views/tabellone/index.css">
</head>
<body>
<table class="board">
    <div class="top-row">
        <tr class="schema">
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td id="cell-20" colspan="3" rowspan="3"><p style="transform: rotate(135deg);">Subway</p></td>
            <td id="cell-21" colspan="2" rowspan="2"><p class="top">Neural Sector</p></td>
            <td id="cell-22" colspan="2" rowspan="3"><p class="top">?</p></td>
            <td id="cell-23" colspan="2" rowspan="2"><p class="top">Neural Nexus</p></td>
            <td id="cell-24" colspan="2" rowspan="2"><p class="top">Neural Horizon</p></td>
            <td id="cell-25" colspan="2" rowspan="2"><p class="top">Cyber Station North</p></td>
            <td id="cell-26" colspan="2" rowspan="2"><p class="top">Datacube Network</p></td>
            <td id="cell-27" colspan="2" rowspan="2"><p class="top">Datacube Lab</p></td>
            <td id="cell-28" colspan="2" rowspan="2"><p class="top">Nano Company</p></td>
            <td id="cell-29" colspan="2" rowspan="2"><p class="top">Datacube Matrix</p></td>
            <td id="cell-30" colspan="3" rowspan="3"><p style="transform: rotate(-135deg);">Malware</p></td>
            <td class="schema"></td>
        </tr>
        <tr>
            <td class="schema"></td>
        </tr>
        <tr>
            <td colspan="2" class="red"><p class="top">220$</p></td>
            <td colspan="2" class="red"><p class="top">220$</p></td>
            <td colspan="2" class="red"><p class="top">240$</p></td>
            <td colspan="2" class="gray"><p class="top">200$</p></td>
            <td colspan="2" class="yellow"><p class="top">260$</p></td>
            <td colspan="2" class="yellow"><p class="top">260$</p></td>
            <td colspan="2" ><p class="top">150$</p></td>
            <td colspan="2" class="yellow"><p class="top">280$</p></td>
            <td class="schema"></td>
        </tr>
    </div>
    <div class="sides">
        <tr>
            <td id="cell-19" rowspan="2" colspan="2"><p class="left">Techno Factory</p></td>
            <td rowspan="2" class="orange"><p class="left">200$</p></td>
            <td rowspan="18" colspan="18" class="center"><p style="transform: rotate(-45deg); font-size: 5vw;">BELMOPOLY</p></td>
            <td rowspan="2" class="green"><p class="right">300$</p></td>
            <td id="cell-31" rowspan="2" colspan="2"><p class="right">Neural Plaza</p></td>
            <td class="schema"></td>
        </tr>
        <tr>
            <td class="schema"></td>
        </tr>
        <tr>
            <td id="cell-18" rowspan="2" colspan="2"><p class="left">Techno Street</p></td>
            <td rowspan="2" class="orange"><p class="left">180$</p></td>
            <td rowspan="2" class="green"><p class="right">300$</p></td>
            <td id="cell-32" rowspan="2" colspan="2"><p class="right">Fusion Plaza</p></td>
            <td class="schema"></td>
        </tr>
        <tr>
            <td class="schema"></td>
        </tr>
        <tr>
            <td id="cell-17" rowspan="2" colspan="3"><p>//</p></td>
            <td id="cell-33" rowspan="2" colspan="3"><p>//</p></td>
            <td class="schema"></td>
        </tr>
        <tr>
            <td class="schema"></td>
        </tr>
        <tr>
            <td id="cell-16" rowspan="2" colspan="2"><p class="left">Techno Bridge</p></td>
            <td rowspan="2" class="orange"><p class="left">180$</p></td>
            <td rowspan="2" class="green"><p class="right">320$</p></td>
            <td id="cell-34" rowspan="2" colspan="2"><p class="right">Zero Gravity Plaza</p></td>
            <td class="schema"></td>
        </tr>
        <tr>
            <td class="schema"></td>
        </tr>
        <tr>
            <td id="cell-15" rowspan="2" colspan="2"><p class="left">Cyber Station West</p></td>
            <td rowspan="2" class="gray"><p class="left">200$</p></td>
            <td rowspan="2" class="gray"><p class="right">200$</p></td>
            <td id="cell-35" rowspan="2" colspan="2"><p class="right">Cyber Station Est</p></td>
            <td class="schema"></td>
        </tr>
        <tr>
            <td class="schema"></td>
        </tr>
        <tr>
            <td id="cell-14" rowspan="2" colspan="2"><p class="left">Plasma Reactor</p></td>
            <td rowspan="2" class="magenta"><p class="left">160$</p></td>
            <td id="cell-36" rowspan="2" colspan="3"><p class="right">?</p></td>
            <td class="schema"></td>
        </tr>
        <tr>
            <td class="schema"></td>
        </tr>
        <tr>
            <td id="cell-13" rowspan="2" colspan="2"><p class="left">Plasma Circuit</p></td>
            <td rowspan="2" class="magenta"><p class="left">140$</p></td>
            <td rowspan="2" class="blue"><p class="right">350$</p></td>
            <td id="cell-37" rowspan="2" colspan="2"><p class="right">Cybercore Plaza</p></td>
            <td class="schema"></td>
        </tr>
        <tr>
            <td class="schema"></td>
        </tr>
        <tr>
            <td id="cell-12" rowspan="2" colspan="2"><p class="left">Holo Company</p></td>
            <td rowspan="2"><p class="left">150$</p></td>
            <td id="cell-38" rowspan="2" colspan="3"><p class="right">-100$</p></td>
            <td class="schema"></td>
        </tr>
        <tr>

            <td class="schema"></td>
        </tr>
        <tr>
            <td id="cell-11" rowspan="2" colspan="2"><p class="left">Plasma Avenue</p></td>
            <td rowspan="2" class="magenta"><p class="left">140$</p></td>
            <td rowspan="2" class="blue"><p class="right">400$</p></td>
            <td id="cell-39" rowspan="2" colspan="2"><p class="right">Megacity Plaza</p></td>
            <td class="schema"></td>
        </tr>
        <tr>
            <td class="schema"></td>
        </tr>
    </div>
    <div class="top-row">
        <tr>
            <td id="cell-10" colspan="3" rowspan="3"><p style="transform: rotate(45deg);">Virtual Lock</p></td>
            <td colspan="2" class="cyan"><p>120$</p></td>
            <td colspan="2" class="cyan"><p>100$</p></td>
            <td id="cell-7" colspan="2" rowspan="3"><p>?</p></td>
            <td colspan="2" class="cyan"><p>100$</p></td>
            <td colspan="2" class="gray"><p>200$</p></td>
            <td id="cell-4" colspan="2" rowspan="3"><p>-200$</p></td>
            <td colspan="2" class="brown"><p>60$</p></td>
            <td id="cell-2" colspan="2" rowspan="3"><p>//</p></td>
            <td colspan="2" class="brown"><p>60$</p></td>
            <td colspan="3" rowspan="3" id="go-cell" style="position: relative;">
                <p style="transform: rotate(-45deg); font-size: 2vw;">GO!</p>
                <div id="pedina"></div>
            </td>

            <td class="schema"></td>
        </tr>
        <tr>
            <td id="cell-9" colspan="2" rowspan="2"><p>Neon Core</p></td>
            <td id="cell-8" colspan="2" rowspan="2"><p>Neon Tower</p></td>
            <td id="cell-6" colspan="2" rowspan="2"><p>Neon District</p></td>
            <td id="cell-5" colspan="2" rowspan="2"><p>Cyber Station South</p></td>
            <td id="cell-3" colspan="2" rowspan="2"><p>Pixel Park</p></td>
            <td id="cell-1" colspan="2" rowspan="2"><p>Pixel Street</p></td>
            <td class="schema"></td>
        </tr>
        <tr>
            <td class="schema"></td>
        </tr>
    </div>
</table>
<button id="dadi" onclick="tiraDadi()">Tira i dadi</button>
<h1 id="risultato">0</h1>
<h1 id="evento">sei sulla casella GO!</h1>
<script>
    // Array delle celle del tabellone
    const celle = [
        "go-cell", "cell-1", "cell-2", "cell-3", "cell-4", "cell-5", "cell-6", "cell-7", "cell-8", "cell-9",
        "cell-10", "cell-11", "cell-12", "cell-13", "cell-14", "cell-15", "cell-16", "cell-17", "cell-18", "cell-19",
        "cell-20", "cell-21", "cell-22", "cell-23", "cell-24", "cell-25", "cell-26", "cell-27", "cell-28", "cell-29",
        "cell-30", "cell-31", "cell-32", "cell-33", "cell-34", "cell-35", "cell-36", "cell-37", "cell-38", "cell-39"
    ];

    let posizionePedina = 0; // Posizione iniziale della pedina (GO!)

    let passi;
    let intervalAnim;

    function tiraDadi() {
        document.getElementById("dadi").disabled = true;

        fetch('<?php echo URL; ?>Board/generaNumeroDati', {
            method: 'GET'
        })
            .then(response => response.json())
            .then(data => {
                console.log(data);
                document.getElementById("risultato").innerHTML = data.dado1 + " - " + data.dado2;
                passi = data.dado1 + data.dado2;
                intervalAnim = setInterval(muoviPedina, 500);
            })
            .catch(error => console.error('Errore nel recupero dei dati:', error));
    }


    function muoviPedina() {

        // Rimuovi la pedina dalla cella corrente
        const cellaCorrente = document.getElementById(celle[posizionePedina]);
        cellaCorrente.querySelector("#pedina").remove();

        // Calcola la nuova posizione
        if (passi > 0){
            posizionePedina = (posizionePedina + 1) % celle.length;
            passi --;
        } else {
            let cella = document.getElementById(celle[posizionePedina]);
            let testo = cella.querySelector("p").textContent;
            clearInterval(intervalAnim);
            document.getElementById("dadi").disabled = false;
            document.getElementById("evento").innerHTML = "SEI SULLA CASELLA " + testo;

        }


        // Aggiungi la pedina alla nuova cella
        const nuovaCella = document.getElementById(celle[posizionePedina]);
        nuovaCella.innerHTML += '<div id="pedina"></div>';
    }

</script>
</body>
</html>